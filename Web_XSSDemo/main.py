from flask import Flask, request, render_template, redirect, session, make_response

app = Flask(__name__)
app.secret_key = "super secret key"
# Base64-encoded image (a simple red square for demo)

BASE64_IMAGE = (
    "data:image/png;base64,"
    "/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxISEBUQEhIVEhUVGBcVFhgWFRgXFhcXFhUXFhgYFRcYHSggGBolHxcXIjEhJSkrLi4uFx8zODMtNygtLysBCgoKDg0OGxAQGy8lICYtLS8tLS0vLS0tLS0tLS0tLS8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLf/AABEIAM0A9gMBEQACEQEDEQH/xAAcAAEAAgIDAQAAAAAAAAAAAAAAAwQFBgECBwj/xABKEAACAQMCAwUFBAUIBgsAAAABAgMABBESIQUxQQYTIlFhBzJxgZEUM1KhI0JicsEVQ2OCkqKx0SQ0U3OjsxYXRFSTlLLC4fDx/8QAGgEBAAIDAQAAAAAAAAAAAAAAAAECAwQFBv/EADgRAAICAQMBBQYFAwIHAAAAAAABAgMRBBIxIQUTQVFhIjJxgZGhFDNCsdE0wfBS4QYVIyRDYpL/2gAMAwEAAhEDEQA/APb6ggUAoBQCgFAKAUAoBQCgFAKAUAoBQCgKnEuJw26d5PLHCnLVI4UZ8sk7n0oDUL72s8LTIjkkuWHSGFzk+jMFU/HOKhyS5ZlhRZZ0jFv4FbhXtcspJBHPHNZ6thJKFMWegZ0Y6PiRjzIqIzjLhmW7R3UrNkWj0JWBAIIIO4I5EeYqxqnNAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAwnaztPb8PgM87c9o0XeSV+ioOvqeQoWjFyeFyeCcZ4hNfTm6u8Fj93HzSBOioDtnzbqa0LtQ5dI8Hr+zeyYVR32rMv2Iq1m8nbXTg4dQRgjIPMHlRNrqisoRmnGSyi32c9oE3DGEaTd9bq3igkydI/WEEn6pHPTkj0rpVTm0ty+Z43tDS6WEpOmfX/T/DPe+CdpbO72trmKYgZKq4LgeZXmKzHIMtQgUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAYztLxuOytJbuXJWNc4HNmJwqL6liB86EpZPnviPEJruc3dycyNsqj3IU6Rxjp6nqc1z77nJ4XB7Psvs2OnirJ9Z/sR1rHYFAP5OuZbZ7pAsVssqQNMx31PIsbMi+SlhkkgeVb1OmXSUjzPaHbUlKVVS9M/we/wDBOAwWlulrEn6NMkBvGSzElmJPMkkn/wCK3fgeabya52utIk4jwqQIkJNy6mdVCn7l9MBIG4kJ04NCTf6qVFAKAUAoBQCgFAKAUAoBQCgFAVuI38cEZllYIg6nzPIADck9ANzVoxcnhFZzjCO6XBrp7ZNnK2cxXzLRqxHohbb4EitpaKfizQfaMM9EzNcG4zFcqTGSCpw6MNLoTyDKfyPI9DWtOuUHhm5VdC1ZizI1QyigFAKAUAoCK5uUjUvI6xqObMwVR8SdhQk8V9p/atb6dbOBg1tbuHkkVsrLMB4VUjYomdz1PwycGos2R2+LOz2PoXdb3kl7Mf3NTrmnshQCgN79kUiTRXnCLhBJEf0yg9UmOl125YZQQRvlvSurTPdBM8J2pp+41DS4fVfM2OC34pw8tbwwNxS2IzAzzxxzQ4wO6lZ/vE8mGSOXlWY0C1w/s7dXN1HecS7oCDDW1tCzNGkn+2lZgO8lHIYGB0qMkZNzqCBQCgFAKAUAoBQCgFAKAUAoBQGl9qpNd9HG2SkUQlA83kdk1fEKhA/eNdDRx9lyXJye0J+2ovjk54o8JK9yMDG/Mb9OfWs9CsWd5q6mVTadZRsZDHe20i7F3MD/ALSMjsM/BlB+tRqop1vJbRTcbkl4noNck7woBQCgFAcE43NAeeQIvGrtLqSAtw+BZBAJcabmZm0Gbu87xqqnTqH62fOrJFjtxb2V2ErF4u9s2PSBgsefPu2BUfAYqJQjLlGarU21flyaNC4p2E4nbyd2sIvUJwksRVP/ABUY+D4jI9a1J6RN+yzt6ft+UY4tjl/T6lC+4BxCD72wnx5xYnX/AIZJH0rHLSS8GbVf/EFT9+LX3MQ/EI1bS5MbfhkUofowFYnp7F4G/X2rpJ/rx8ehtHs0tb2a7nnsJIY1WJYXllR5Fy7a8RBSAzjSDucDI863dNBxh1PNds6iu6/2HlJHpvZvid3Fetw29kW4Yw/aIJ1jEWtVYJIjoCQGUlTt0NZ2jks3CoIFAKAUAoBQCgFAKAUAoBQCgFAKA1vtZwiRylzAuuSMFXTODJGTnCk7a1IyM88kda2dNdseHwzS1mmdqTjyjVjxWIHDFkbqjI6uD5aCMk/CumpxxnJxnCXGGZrs1wuSWdbqVGjjjB7lXGHd2GkyMvNQFJAB38RO22dLU3xa2xOlotLJS3zXwNzrQOoKAUAoDC9pe1VpYIHuZgmfcQeKR/3EG56b8hncipJSb4PLePe0u9uw0drEtnCwKl5QHnYEYyF92PbPPPxrbq0Vk+r6HT0/ZV1nWXsr1LvYz2iQWtlFaXUU6vAvdho4jIkiLsrAg7HGMg9axzosg8NGtdo7q5OLi/obVwv2j8NncRifuXPJZ0aLPoGcac+mc1jcWuUYJVyj7ywbYKqUFARXFukgw6K48mUMPoaA7QW6ooREVFHJVUKo+AGwoDy/2idqZbLjFvJBGkzR2z94jEr4ZpRsGHut+jBGQdulZK6pWdImaiid2VBcG19kvaPZXzCLJt7g/wAzNgMT/Rt7sny39Kxyi4vDMc65QeJLDNxqpQUAoBQCgFAKAUAoBQCgFAKAUAoBigFAKAUAoDzXt17S+6drPh+mWdfDJKd4oDyI/bk57cgeedxWaqiVjwjZ02lsvliP1PMVtmaQzzO08z7tJIcsfh+EeQHKuvTpo1rzZ6jS9n10LzfmWglbSRv4OwWpJwdZoFcaWUMD0IzVZQjJYaKTqhYsTWSXh19e2q93a3ssKdEYLKi+iCQHSPQVpT7Pg37Lwcm3sWpvMXj7kdzd3ch1SX92x9JmjHyVMAUWgrXLYj2NQl1bYHFL4DSOI3mn/e5P9ojNVegh5sq+xqs9G/t/BjtDg6vtFxq6t9ok1H1J1Vb8HWW/5Xp8cP6kYiwzOSzs3vM7F3bGwyzEk1krqjX7pnp01dK9hEdzbK4wwz5eY+B6UnXGawxdTC1Ykjb+xHtQmtHNtfM9xbrpAmxqliBG2vG8i/3h68q5VtLjJpcI85qNK65S29Uj3GzukljWWN1dHAZWU5VgeRBHOtc0yagFAKAUAoBQCgFAKAUAoBQCgFAKAUBh+0XamzsVDXU6xavdXdnbp4UUFj8cVIPNe23tMF0v2PhsjKGGZ5yrRuinbu4gwDBz1boCMb8s1FLtlg3NHpJaizauPE02ztFjUIgwB/8AcnzNd2utQjtR6+mmFUVCC6FtUrKkbCR3CVOC2DtppgYGimBg6lKYGDoyVGCrRC6VVoo0QutUaMckQsKqY2ivcSBFLHkBk1SclFZZhtmq4uUitw+I6SzDxSHUR5Z5D6Vipj7LcvHqa+lrag5SXWXVmz9hu2EnC5dLansnP6RBuYSf5yMeXmvX41p6nTbfajwcvXaHZ7cOPH0PoC1uUlRZY2Do6hlZTkMpGQQeoNaJySWgMZ2j47DY273M7aUXoN2dj7qIOrH/APdqEpZPF+N9ruIXzFmmexh5rFA5WTHnLKNyfQYHpXSp0La3WdDuaXsduO+54Xl/J6d7Kb6afhFtLO7SORINb7syrM6oWPMnSBudzz3zXOfJxJYz0NtqCooBQCgFADQGh/y7eTKLmKeOJGJMcXdh/APdMpPiyw38JGPWujDSw91p58zkWa2zO6LWPI2zgHEvtNtHPp0lx4lznDKSrAHqNQO9aM47ZOJ06bO8gp+ZkKoZBQGE7YcfFjaNPp7yQkRwxjnJM5wiDHmfyBqSTFdk+xwiDXd4Rc30wzLK3iEf9FCOSIvLbn8MAAec+1OySK5gnQAN3oiYjqjg7HzwR+dZ9NJxsXxNzQWOF8WvMxyLXocHt0iULVkiyR2AqSTnFCRigOMUwRg6stRghoiZargq0V5FqrRikivIKxywuTFLossxH37Z/mlO37bDr+6K1PzpZ/Svuzm/1M8/oX3f8F01sG6zgijWehVpNYZu3si7VG1nHDJm/QTEm2Yn7uUnJiz+FjuPX96uRqadkunB5vXaXuZ5XDPZb27jhjaaVwkaAs7NsAoGSTWsaB4J2h49JxS5+0uCtvGSLWI+XWZx+NunkMfE9XRab/yS+R6LsrQcXWfJf3MXxiUrA+kZZhoUDmWc6Rj61uameyps6mvt7vTyl6Y+p9Ddn+Gi2tILYcoYkjz5lVAJ+ZyfnXnjxJkKAUAoBQCgBoDUpuxrBiIbkxREk6O7DMmo5IjcnwjyyDityOslFYwc+fZ8XLKeEbLw6ySCJIYxhEAVRzOB5nqTzz61qyk5PLN6MVBKK4LFVLCgNH40n2vjkFqSRHa20l0cH+dmJhjP7yjUwPQmpJLvYfsmOFW0kX2h59bmTLjTjIAwBk+WSepoOTzH2i3QmvYIRvpYzt6BRpX6kn6VtaSDnavTqdDsynvNTH06v5FVRXoEe1JAKsWOaAUAoBQHBFAdGFVwVKtw4UFmIUDck8hWOclFZZhtnGEXKTwkYRg1yc7pD9Gk/wAk/wAa0/av9I/uct7tW/Kv7y/2LZQAYAwByFZkkuiNvaorCOhoQzpUFSvfIChy2gjxBs4KsNwQehzWK+MZQaZrauuM6mpGx8V7V3fFoYUnHdQRqpdQf9YlUbu/kmdwvn57Y1NLpN73z4Of2d2b3j7yz3fD1/2OldjGD0+MdCx2fsvtHFLK3xlRIbh/3YF1jPoW0iub2jP2VE4XbluIxh8z6CrknmhQCgFAKAUAoBQGs3/a0LI0cEJnKEqzawkYYc1DHJYjrgYHnW1XpZTWX0NK7XQhLC6lrgnaRJ37l0aCXBYIxBDqOZjcbNjIyNiM8qpbRKvq+DJRqoXdF0ZnKwGyeecW4gLLtAJJNku7RURjyMkMhLJ8cMp+dT4E+A7Z9u4oYjltzsqj3nPko/jT0JSbfQ8w4ckju9zN97KckfgUe6g+Aru6LT93HL5f2PXdlaLuK90vef2RklFbyOudqkkUAoBQCgFAUeIcRSLC7s7e6i7sfl0HqawXXxr6cvyXJqanVwp6cyfCXJRWweUiS4xtusQ9xfVj+u35VgVMpvdb8l4GtHTWXNT1HyiuF8fMtyCs7NtoquKozFIhaqsxsp3N6FbQoLv+FefzPQVgsuUXtXV+RqW6lQe2Kbl5fyTWnCy5D3BDY3EY9wfvfiNTCiU3utfy8C1WjlY99/8A8rj5mbFbp1UsCgNr9jtl3nELu6I2hijt0PTMh7x8eo0r/aria6WbmvI8j2vZv1DXl0PX60jligFAKAUAoBQEV3q7ttHvaW0/vYOPzqVz1IlnDwef9nrsLZJEFHiVdRPvBgBrB9dQPzzXYdSclLPB56NzjXKDXPj4nKgm5tQvv9+pXz0hW7z5aM/UVGox3byTpc99HB6JXHPQng/tamW64u0LeJLaFEx5SS/pSQfPSU+lbujpVje7g6vZmlhdKW9ZWDXbLhkSNrC5b8TEsfkTyrp1aauHVLqeg0+hpqeYrr6/2MslbR0ESCrF0dqkCgFAKAgu7uOJdUjBR69fgOZNUnbCtZkzFbfXSt03gx/2ief7tTBH/tHH6Qj9hP1fia1t9t3uLavN8/JGk7NRqela2R/1Pl/BeHzLdlw6OEHSMsfedjl2+JrNXTGvj6+Js0aWunrFdfN8kr1czMrSVRmKRVkrGzCyFqqY2IwM5xz5+vxqElnJEUk8ouw1mibUScVYuKBvCyemexSz08M7/G9zNLNvzxq7tflhB9a81ZLdJy8zwV9neWSl5s36qGIUAoBQCgFAKAUBrvEeycbyNLFK9uznU4QKyMx5sUcEBj1IxnrmtmvUzgscmndoa7Hu4Za4L2djt2Mmp5ZSNJkkIyF56UCgKg+A361Sy6VnJko00KuOTFX/AG7jWaSG3tbq9MJKzNbRB0jcc01Mw1OOqrmsWDZweOcbe4e7ur2SyvI45pS6u9tIoWNQFTXttsK3tLdCtNSOx2dq6qItT8WcWkyuoZSGB6iutXNTWUz0lNkbI7ovKLiVlRsImFXLHNCRQFK84rDGdLOC3RF8Tn+qN6wWaiuHRvr5LqzVu1tFXRy6+S6v6FbvrmX3EFup/Wk8UnyQbD51i332e6tq9efoa/eau/3I7F5vq/oTWnCI0bW2ZZPxyHU39XovyrJDTQi9z6vzZmq0NUJb5e1LzfX6eRkK2DcOpqGCJ6qyjK0tUZikVZKxswshNVMbCUCLkNZEbESwKuZEVeKy6IJG6hGx8cYH51ivltrk/Q19ZPZROXoz33sfYfZ+H2sHIpDGp/e0DV+ea86eGMvUECgFAKAUAoBQCgFAKA819nnG7a0szZXU8cFzbyTC4EzhGZmlZ+9GvGpWDKQRmrFmj0BWyAQcg7gjkQfKhB5V7TuyaW+eJ2qBFyPtcSjwlWOO+VRyYE+LzBz0OdjT3uqXp4m9odXLT2J+D5NRa9jUZaRF+LAV3HbBdWz171NUVmUl9SE8eh5IWlPlGjN+eMfnWP8AF1/py/gYX2lTxDMvgmx9suX+7gEY/FM3/sXJ/One3S92OPiR+I1Vn5de31k/7IfyXI/39wzD8MY7tfmR4j9afh5z/Ml8l0H4O2z86xv0j0X8lyzsIohiNFT1A3PxPM1nhTCHuo2qtNVV7kUizWQzigFAdCagghc1VlJFaQ1jZikVnNY2YWQmoKHZKEouRVlRniTirGRFLjEJkiEQ/nHij/tyKK1da8Us53assaaXyPpcDGwrgnjxQgUAoBQCgFAKAUAoBQHl3t4s0NvazNGpC3Co76QSFaN8AtjOnVj0zistON63cGxpdvex38ZJPYpeyvZzwuxeO3naKEk5wmlW0A+S528tWOgpNJSaRXURULJRXgzd+N2ST200Egykkbq25GxU9RVDEfOnALKIwRuYk1FRklQTnz3rtaWqt1qTisnruz9PS6ITcVnHJnY9thtW8unB1opJYRIDVi5zUg5oBQCgOpNQCNjUFWyCRqo2Y5MrSNWNmKTK7mqmFkZNQVO8dSiyLsVZEbESYVYuRMMzWo87q2H/ABlrT135XzRyu2f6b5o+j64Z5IUAoBQCgFAKAUAoBQEN7dJDG80jBEjVndjyCqMk/QUB5/8AYLrjcXeXTtaWEmGjt0C9/MgKsj3EhB0A4yEUciN9sm2C3Bt3A+Dw2cC21umiNc4GSSSxySxO5JPWhBjPaHdyRcKu5Ijh1ibB8g3hYj1AJx60CPFbJQqKq8gAB8AK9DUlGKSPc0RUK4xXGC4jVmTNlMmVqtkvk7ZqSTnNAM0BwTQHUtVckNkLtUZMbZXkaqNmNsru1UZjbImNVMbK1zdKmNWwJxnGw+PlWOdihjcYLb41Y3eJahOdxvWRdTYg0+qL0dZUbESUVYuQznElu34bm3b6TLWnrvyfocvthf8AbP4o+kK4Z5EUAoBQCgFAKAUAoBQGN7S8K+12c9rq0d9G0Yb8JYbHHUZxtUkmJ7DcUe4slMqqksTPbyhTldcDd2SuQMA4Bx0zVgZ+gMJ24h18MvFxkm3mx8e7YioB4NYS5jQ+aqfyFd6p5hFntNPLNUX6Iuo9ZkzZUiVXq2TImSB6tksmdtdMk5GumRk6l6ZI3EbPVclWyF3qrZjbIWaqNmNshY1Uo2dCaFWdGUEYIyD0NVaTWGVaTWHwUliaA6ovEnNo/wCKf5Vr7JVdYdV5Gl3c9N7VXWPjH+DO2FwsiB0OQfqD5EdDW7VONkcxOrRdC6G6DLIrIZzH9oGK27OOalXHxV1Na2sWaWaHakc6aXy/c+mVbIBHI7/WuAeMOaAUAoBQCgFAKAUAoBQGk9lx3HEuI2Z2DyJfR+q3C6ZMfCRD/aqyLG20IKHHxm0uB/Qy/wDLagR822k+i1V/wxg/Ra7EJbaU/Q9VVZs0il/6ljhCFYUBOSRk/Ft/41k06arWTPo4uNMcludm0HScNjYkZGfhWWbe14M9rkoPa+p04ZdmSJHOMsMnHKq0WOcFJldLc7aozfLLfeVmybO4d5UZI3HUyUyRuI2eq5KuRGzVDZRsjJqpVs6E0IOKgqcUAoCo7mB++X3T96o6j8Q9RWvPNUu8jx4o07M6effQ4/Uv7mxRuCAwOQRkHzBrfTTWUdmMlJKS4KfGlzbSj9hj9BmsWpWapfA1tcs6aa9GfRPAZ+8tIJPxxRN/aRT/ABrzp4cvUAoBQCgFAKAUAoBQCgNL7Yj7PxHh9+Nld2sJvVZxqiz5ASIP7VWRKNroChx84tLg/wBDL/y2oD5hmP8AoQHmiD64rpy/p18j0M/6JL0Rn4lwMVvRXQ7FawkSYqxcxBtZYQTEVePdtDbEdSFNand2VZ2dV5M5nc3afLqacecPw+DLtrch0VxsGGfhWauzfFSXiblVysgprxJNdXyZMnBeoyRk6lqFcnUmoIydSagg60IOkzkKSFLHoBzNVlJpZSKWTcY5Sy/IrmS4xnuR8NY1f4Vi324zt+5rd5qedi+vUktbpXBxkEbMp2IPqKvXYp/HyM1N0bF05XKfKMt2Y4A3Er1bRciJcSXLj9WMH3AejPyHzPStTV3foXzOb2nqsLu4/MtcQ4UbG9m4e2dKHvICf1oHJK/EqcqfUGs+guzHY/Dg2uxtVui6pcrj4EN2mqN181YfUEVvWLMGvRnYvW6uS9H+x7Z7OZ9fCLJuf+jxr81UKf8ACvNM8EbHUECgFAKAUAoBQCgFAKA1T2pwauEXLDIaJVmQjmGhdZAf7v0JqUSjPW0utFfnqVW25eIA7fWrAwHtFue74TeNnH6B1HxcaB/6qA8N7cdl5+Gr3MmXhkUGCXHUAM0T45ON8eY5dQM8b/8ApuD+R0a9Xml1T+X8E1u2VB8wD9RXYg8pM9PVJSgmS1kMpR4xcaIWx7zeBfUtt/nWvqJ7a+nJp623ZU/N9EdLWPQip+EAfSlcdsVEimHd1qPkiXNXMuRmgycE1BGTjNCDigFAWrGME1evDZmpSbI+JXYR1X3QTuTyxg9fPlVLbFGSRi1F6hOMePUrzcOlluYFtlDSzExAE4B2yGY+QAJPoK1dU+7asic7tGXcON0PHKPoLsN2Uj4baiBTrkY65pDzkkPM+ijkB0HqSTypNt5Z52UnJ5ZjPad2RN7As0G13b5aLykU+/E3o2NvI+QJq9djhJSRkoulTNTjyjyOyuRKmcFSCVdSMMjDZlYdCDXfqtjbDKPZ6bUQ1NW6P+M9d9jkhPBrcE50GaP5JPIB+WK89JYZ4maxJo3SqlBQCgFAKAUAoBQCgFAQ3tqksTwyDUkisjDzVgVI+hoDT+wN28aycLnP6exwgOMd7bn7iVfPw+E+RX1qxLOPaaQ1pDAf+0XdpD8QZlc/khPyoSjaOPcHhvLeS2mQOjgjBHI/qsPIg7gioIPmzhQZU7p9niZonHkyMVP+FdrSS3Vo9Z2dZvoj6dC/W0dAwsj97Pn9SLKj1c8z8q0s97ZnwX7nKcu/v3fpj92XK2DcGaA4oBQCgFCDigKsFz9nlYt93Ic5/C3XPoa11PuZtvh/Y1IWvS2ty92Xj5MuzTxthy64U5B1DHIj+NZpThLEmzanbTPE5SXQ3b2T8BkurxOIsrLb24cQkjHfSupQsoPNFBO/nj1xzdVerHiPCOB2lrFfNKPCPaq0zmCgNB7Z+zhbqb7Xayi2nbaXK6opQBgFlBBDj8Q5/nWWu6VbzE2NPqrKHmDNk7G8AFhZRWgfvCgYs+Mandi7HHQZY49Kxt5eTA3l5ZmqggUAoBQCgFAKAUAoBQCgNK7fwi3mtOKpgNDKlvMeWu2uHCFT56XZWA881KJQ7ej9NwwHl/KEJ+YimxUhG61Ug+fvaFwo2fFpdsR3f+kRnprO0q/HV4v6wroaG3D2s7PZF6jJ1vx4MKsM9xILS0TvJ5AcAEAIoHididlHqepHpWzqdRsjtXJ0NfrVVDbF+0/sUZIGtCLa5ie2kH6sgwG82V+TDPUGsVF9ajt4NfSaylQUOH6kwNbaafB0k0+qOakCgFCRUECgIJLpQwQZdzsqICzk+QUb5rFO+EOWa9urqqXtPqbn2b9mN7eYe7zZQH9TY3Dj4HaL+tvtyrQt1Tl0RxtT2hK32Y9Een2Xs94VEqqtjA2kAAugkY46sXzqPxrVyc7JsyKAAAAANgBsAPICoIOaAUAoBQCgFAKAUAoBQCgFAKAUAoDTvauccOy2O7FxamUnpGLhCx9OlSiUVfaBKHm4bbowMz30MyKDv3cSyNI/7oUnf1qSUb3VSpie0vZu2v4hDcx61B1KQSro3mjDcfxqU8Ep44IuzHZO04erLbRaC/vuxLSNjlqdt8enKjbYbb6syXEeHQ3CGOeJJkPNXUMPoagg0Li3sesXJa2kms2OdkbXFk+aSZPyDCskbZR4Zmrvsr914NZvPZHxBPurq2nH9IrxH+7qFZ1rJrnqbkO1LlzhmNf2c8XBx9nhb1W4UD+8M1k/HPyM67XfjH7nH/V5xf8A7rF/5lP8qfjn/pJfa3lH7l229lXFHPje1hH70kjD5BQPzqstbPwMMu1bHwkjP8M9jMXO7vJp/wBmJRCh9D7zH5EVgnfOXLNW3V3Wcy/sb3wDsvZ2Qxa28cRxgsBlyP2pGyx+ZrEa2TMVBAoBQCgFAKAUAoBQCgFAKAUBTueKQxuI3cKzZwDnfCs+B5nSrHHoauq5NZSMcroReG/DJK17GFD610kZBznIHPGOdFCTeEiZWRistleXjEIRZNepW1AFdxlThgfIg5BHQgirQplJtLwKWaiEEm/Hg6WXHrab7uVW8Zj2PJwFOk9M4ddv2hUSrks+haNsXj1O54vCJhAWw7NoXPJm0lyqnzwrH+qaOqShv8CI3wlNwXKO0s0EySRvodMFJVcDTpORhgdiDg/SodcljpyTG2DTafBrljwfhnC8T21uqmUhNaku2GZVwGdiQuSuQMcvSrRrlLPoRO+KcfU2prlApbUCAC2xB2HUYqii28FnZFLOfUoR9o7YuI+9CuQSA2xIAydqySonHkxQ1Vck2vv0JL3i6RvEhy3elVUrgjxHAPw9aqq24uXkX71b1DzLN7eJEoZ84JxsM9M/wqK65TeETbbGpZkULftNauSqyhiuzAb6TjI1Y5ZrJ+Hs8EYnq60k30z6F2y4jHLkI2SOY5HHnjy9apOuUPeMlV0LVmJFf8XihOJG07ZzjbHxqYUyksorZqYVy2yzn4Ha14tDLH3sUiyLp7wFTnK4zkelV7uWUi/exw3ngcI4ktxH3iggBnQg89SMVPyyKicdraJrnvipeZJLeoFchg2gZYAjNSq5NpeZWVsVFy5wV+FcZinUMpwfF4WwG8DlGOOoyOfqOWaSrcWWhZGX0z9Syt7GXEYcFmGoDPMennUOEkstBWQbwn6leHjUDOY9YVsMwDbZVSAzDzALL/aFXnTOOOnJjr1EJ5w+Dm54xCgBLgg53XcbeZHKpjROXh9SJaqqOOuc+XUitu0NrImtJlcZK+HxbqcEbeRotPY30RMtTVFZbx+5Fa9oY5J+6UEqY3kEn82O7kWJlZjybUxAH7DeW9XBrp4lo2p5b6Lp1+Jk0u4zjDqc7DDDc+VQ4SXKLRthLhoQ3SMzIrqzJjUAd1znGR0zg/Q+VVcWuSYyUuCaoLCgFAKAUAJoDS+011C00bagc4C9Mvpc4GeunVXT08XGGJ+ZxNXYrJ5r69OpSa5SO2tbXYFfB+82CxI+SsxqaanXJt+JOovV0UorjkjS3VuGiGSNZGE91J3TY8Qa7mljyDtg+A5PmKx1wanNSX+ZM11qdcHGXVY+XQoWc8hxGe7B1lVWEllgZIu+zkqupvCp2GOXkayYXVNYz0+xie7KlFtuKz1+JZN8WnWXBzDcHJ6E9w2pvQDvcH4VM4qcdi8GilUnXLvHy0/uc2N3rXvIpDIrkgnGAyNgjSSBqAOkht+RFW9meHF8Mo3KtOM1jK/xnS/kJtwcEKzRsFPQmVA35rv6g+tFtaco/P6hxnFqMvJ4+aI725eISOXxqdIoEVcFmkCKMtklmMjMNOAMDfO9RY5Jty4LVRhJJRzu8fLB0TEUxURQxK5YqQf0sz6TI2FCfE5LdPhU+7LgrnfX1k36eCMjExL2p3wZYWUHornWMY6HVnrzrFdtdTlHxZs6ber1CfgmbV2tt1ktWVlDqSAVO4IIIIOehzWtpes8ehta54r3LwaNEsboqCrrFGQ0SCGE6ihlfu11HSoySRsOQWtyMowy2kuDnThKzCi22889DPdirGOK4fMiK/d93BAq6AkKMpc4JyzamQE7Ywu25J1dUnlPw8DoaFpxfnnrkk7eW2pkcQxzOoygkICg5ILairYwD0BNX0yzB9M9TDq3ttXtNZXgYnh1yXAKkEhMlo/uyGJjZVyASvTl1U+VbO6MsJ/FGm4zjulHjh/PzNn7Df6q3+/uP+c1c6/8xnY035MfgYW4c/aJlAYaPeO2CsjuAv1jz8hXQg4y2p84yjkWRnDfJcNtMpdmwscyXPvBEu4wMb65biNsg+QMTD51jsp7xLHqZqtSqXLcuUsfJdCDh11qk1R9GkkDjpocW5AHkwLDP7VZHtl7L8ev0MS31revDp9TrEDOyuqgApOgLOUGO8RQRIgJXUEyCKTm/eSzyRCuKzGUscP0IpLWLLQ6BPKqI5jeVpFGljoOqTJHiLEEjpy2qcJ9H16cMOUk084WcZSIVLzIIdC3DtLpEUEmiKMpGHMcshKalG7Ngb6sYOMVhnKMYPPTr4GxXXKVkXF+Gcy+Jkrm0K3QtoxHAiWz5iR2ii7xngAClB4cYmw2M7nzqsJOKjhZ6MtZGM5TzLHtLkrBIY2MTOdYWNmBleXSBJ4CGbxbvyO2celbC24xL6M1ZOecxxy8NI2PsRJCs1xCup52KzzORkBWykUZI93CqcL18Tda0dTHE85Onop7q+MY+5uFaxtigFAKAUAoDDQdl7Vbj7ToLSeLTrd3VNeQ3doxKpkEjIHI45VeVkpcspGuEcpIh/6H2mtpAr94ylFcyO5jDc+5EhZUJwOQ3wAdqnvZ5zkr3Fe3bjoQp2Hs9y4llZl0FpJ5SdOpHIUBgEDFFzpAyBg7E0ds3yy0aoRWEkXoezVqjRtHCsYiDqioNEeHBVsouxOCd+e5qu94wS4Rbba56fIqt2MtDGsTq8iq7yENI/jaQ5bvMEB18lOw8ql2SeepCqgsdODI8Q4JBP3YkjDCI6oxkgKdJUbA4OAds8iAeYFQpNcEyinyiFuzdqYYrfugIoSrRqCwAKnIzg5YZ3IOcnc5NFJrhhxjLlEVh2UtYphcBGeUZ0tLI8pTIwe7DsQhI2JUAkVMrJS5ZEK4wWIrAXslZASjuFzOGEj5bvCHySokzqVd9gpAG2MYqN8s5yW2RxjBafgluTAe7A+z47kKSqppXSo0qQCAOQOQOlRueMDCzks39mk0TRSAlXBBwxU4PkykFT6g5om1wHFPkp23ZyzjVES1hVY27xB3a+F+WsZHv/tc/WmSS0nDohObkIO9Kd2W66QdWPLn164HkKNtkJJEPF+CW90FFxEJVQ5CtnQT+2ucOPRsjrUqTSwMLORb8Et0kaVIkV3RYmIG3drnCAclXfkOdNz6DaupLwrhsVtGIYVKoCzYLMxJdizEsxJJJJO5qG2+rJSx0RHHwaBXmlEY13GnvWycsFXSo5+EDc4GNyTzJNTuZXasYwUZ+yVq8KW+mRUQFRomlRiCckO6uGfJJO5PM+dSrJLhkSqhJ5aJIuzFsmru0MYMQgARiFRFORoXkrZAOfQUVkl48B1weU1zyQr2Ps/0QaMuIY+6QO7MuMY1MpOGfH6xGajfLjJOyOc4JX7KWRiaAW0axuwd1QaNbDq5TBb1B58jTdLnJLiiePgFurwyJGI+4DCJY/BGusaTlFwpOMgZG2o1G54x4Das7vEjbs5A0000g73vljQo4UoojZ2BUYzklySSTyGMVZzk8ehVVxWenJHJ2Ute77uOMW4MiysYVVC7KQfGcb5xg9ceVQptZ9SXCLayuODJ2tlHEXMaKhkYyPpAGpyANTY5nAAz6VDZbBYqAKAUB//Z"
)


# In-memory comments store (not for production use)
comments = []

@app.route("/", methods=["GET", "POST"])
def index():
    global comments

    if request.method == "POST":
        # Insecurely add the user input to the comments (XSS vulnerability)
        new_comment = request.form.get("comment", "")
        comments.append(new_comment)
        return redirect("http://127.0.0.1:5000", code=302)

    resp = make_response(render_template("index.html", comments=comments, base64_image=BASE64_IMAGE))
    resp.set_cookie('somecookiename', 'I am cookie')
    session["USER_SESSION_COOKIE"] = "Numsefisken"
    return resp


if __name__ == "__main__":
    app.run(debug=True, port=5000)
